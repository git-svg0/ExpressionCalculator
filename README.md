# 表达式求值计算器

表达式求值计算器是一款基于双栈算法求值的桌面应用程序，允许用户输入数学表达式并计算结果。应用程序不仅显示计算结果，还会提供详细的栈操作过程文本展示及动画演示，并支持计算历史记录。

## 基本功能

### 1.表达式输入

* ​​数字键​​：0-9

* ​​运算符​​：+（加法）、-（减法）、*（乘法）、/（除法）、%（取余）

* ​​特殊符号​​：
- .：小数点
- ~：负号（取相反数）
- ()：括号（改变运算优先级）

* ​​功能键​​：
- =：计算结果
- 退格：删除最后一个字符
- 清空：清除所有输入和结果

### 2.表达式语法规则

* 支持基本四则运算和取余运算

* 使用~表示负号（或取相反数）：
- 正确示例：1+(~3)、~(~2)+1、~1-2
- 错误示例：3~、~~3、1+~2

* 括号必须成对匹配

* 运算符（+-*/%）不能连续出现

* 小数点使用规则：
- 不能以小数点开头（如.5无效）
- 不能连续出现多个小数点（如3.5.2、3..5无效）
- 小数点前后必须有数字（如3.、.2无效）

### 3. 表达式求值

* 符号优先级：~大于*/%大于+-

* 输入表达式后：
- 按=按钮
- 或按键盘Enter键
- 结果显示在顶部结果框中
- 计算过程显示在右侧"栈操作过程"区域

### 4. 历史记录

* 自动显示最近10条计算记录

* 功能按钮：
- CH：清除历史记录
- 导出：将历史记录保存为文本文件

### 5. 快捷键

* F1：查看使用说明
* F2：清除最近计算记录（CH）
* 回车键（ENTER）：计算表达式
* 退格键（BACK_SPACE）：删除表达式末尾的一个字符
* 小键盘0-9：输入数字0-9
* 小键盘小数点：输入小数点
* 小键盘加号：输入加号
* 小键盘减号：输入减号
* 小键盘乘号：输入乘号
* 小键盘除号：输入除号
* 左方向键(←)：输入左括号
* 右方向键(→)：输入右括号
* 上方向键(↑)：输入%（取余）
* 下方向键(↓)：输入~（负号）
* ESC键：清空表达式和结果

## 高级功能

### 栈操作动画演示

* 完成一次计算后，点击"动画"按钮打开演示窗口

* 动画控制面板：
- 上一步：回退到上一个栈状态
- 播放：播放或暂停动画
- 下一步：前进到下一个栈状态
- 重置：更新栈操作数据并回到初始帧
- 关闭：关闭演示窗口

* 可视化效果：
- 左侧：操作数栈（蓝色背景）
- 右侧：运算符栈（紫色背景）
- 当前操作步骤显示在顶部左侧

## 使用示例

1. 基础计算：
* 输入：3 - 4 * 2
* 结果：-5
* 计算过程：先乘法后减法

2. 带括号的表达式：
* 输入：(3 + 4) * 2
* 结果：14

3. 负号使用：
* 输入：~(~3 + 4) * 2
* 结果：-2

4. 小数和取余：
* 输入：10.5 % 3 + 2.5
* 结果：4.0

## 温馨提示

* 所有计算使用精确小数处理，避免浮点数精度问题
* 除数为零时会显示错误提示
* 非法的表达式会给出具体错误原因
* 最近计算记录自动保存在内存中，退出程序后清空（如需保留请手动导出）

## 系统要求

* Java Runtime Environment (JRE) 8或更高版本
* 推荐分辨率：1920×1080或更高
* 内存：建议至少2GB可用内存
